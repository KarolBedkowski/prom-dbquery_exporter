database:
  testdb:
    driver: sqlite
    connection:
      database: rwr3.db
query:
  testq1:
    database: testdb
    sql: >
       select s.name, count(t.id) as cnt from sports s left join trips t on s.id = t.sport_id group by s.name

    metrics: |
      {{- range .R }}
      rwr3_sport_trip_count{sport="{{ .name }}"} {{ .cnt }}
      {{- end  }}
      rwr3_sport_trip_count_rows {{ .Count }}
      rwr3_sport_trip_query_secounds {{ .QueryDuration }}
      rwr3_sport_trip_last_query_unix {{ .QueryStartTime }}

  testq2:
    database: testdb
    sql: >
       select count(t.id) as cnt from trips t

    metrics: |
      {{- range .R }}
      rwr3_trips_count {{ .cnt }}
      {{- end  }}
      rwr3_trips_count_rows {{ .Count }}
      rwr3_trips_query_secounds {{ .QueryDuration }}
      rwr3_trips_last_query_unix {{ .QueryStartTime }}
